(()=>{var e={};e.id=3174,e.ids=[3174],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79646:e=>{"use strict";e.exports=require("child_process")},55511:e=>{"use strict";e.exports=require("crypto")},14985:e=>{"use strict";e.exports=require("dns")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},91645:e=>{"use strict";e.exports=require("net")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},24669:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>g,routeModule:()=>f,serverHooks:()=>y,workAsyncStorage:()=>h,workUnitAsyncStorage:()=>x});var s={};t.r(s),t.d(s,{POST:()=>m});var i=t(42706),n=t(28203),a=t(45994),o=t(96330),u=t(39187),c=t(55511),p=t.n(c),l=t(14702);let d=new o.PrismaClient;async function m(e){try{let{email:r}=await e.json();if(!r)return new u.NextResponse(JSON.stringify({status:"error",message:"Email is required"}),{status:400,headers:{"Content-Type":"application/json"}});let t=await d.user.findUnique({where:{email:r}});if(!t)return new u.NextResponse(JSON.stringify({status:"error",message:"User not found"}),{status:404,headers:{"Content-Type":"application/json"}});if(t.emailVerified)return new u.NextResponse(JSON.stringify({status:"error",message:"Email is already verified"}),{status:400,headers:{"Content-Type":"application/json"}});await d.verificationToken.deleteMany({where:{userId:t.id}});let s=p().randomBytes(32).toString("hex"),i=new Date(Date.now()+864e5);await d.verificationToken.create({data:{identifier:r,token:s,expires:i,userId:t.id}});let n=await (0,l.k)(r,s,t.name);if(!n.success)return console.error("Failed to send verification email:",n.error),new u.NextResponse(JSON.stringify({status:"error",message:"Failed to send verification email. Please try again later."}),{status:500,headers:{"Content-Type":"application/json"}});return new u.NextResponse(JSON.stringify({status:"success",message:"Verification email sent successfully. Please check your inbox."}),{status:200,headers:{"Content-Type":"application/json"}})}catch(e){return console.error("Resend verification error:",e),new u.NextResponse(JSON.stringify({status:"error",message:"Failed to resend verification email",details:e instanceof Error?e.message:"Unknown error occurred"}),{status:500,headers:{"Content-Type":"application/json"}})}finally{await d.$disconnect()}}let f=new i.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/auth/resend-verification/route",pathname:"/api/auth/resend-verification",filename:"route",bundlePath:"app/api/auth/resend-verification/route"},resolvedPagePath:"E:\\Deepshika\\web development\\Together-We-Can-main\\src\\app\\api\\auth\\resend-verification\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:h,workUnitAsyncStorage:x,serverHooks:y}=f;function g(){return(0,a.patchFetch)({workAsyncStorage:h,workUnitAsyncStorage:x})}},96487:()=>{},78335:()=>{},14702:(e,r,t)=>{"use strict";t.d(r,{k:()=>a});var s=t(98721);let i=process.env.EMAIL_USER&&process.env.EMAIL_PASSWORD?s.createTransport({service:"gmail",auth:{user:process.env.EMAIL_USER,pass:process.env.EMAIL_PASSWORD}}):(console.warn("Email credentials not configured. Please set EMAIL_USER and EMAIL_PASSWORD environment variables."),null),n=async e=>{try{if(!i)throw Error("Email transporter not configured. Please set EMAIL_USER and EMAIL_PASSWORD environment variables.");let r={from:process.env.EMAIL_FROM||process.env.EMAIL_USER,to:e.to,subject:e.subject,html:e.html},t=await i.sendMail(r);return console.log("Email sent successfully:",t.messageId),{success:!0,messageId:t.messageId}}catch(e){return console.error("Email sending failed:",e),{success:!1,error:e}}},a=async(e,r,t)=>{let s=`${process.env.NEXTAUTH_URL}/auth/verify?token=${r}`;return n({to:e,subject:"Verify Your Email Address - Together We Can",html:`
    <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
      <h2 style="color: #333;">Welcome to Together We Can!</h2>
      <p>Hi ${t},</p>
      <p>Thank you for registering with us. To complete your registration and verify your email address, please click the button below:</p>
      
      <div style="text-align: center; margin: 30px 0;">
        <a href="${s}" 
           style="background-color: #4CAF50; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; display: inline-block;">
          Verify Email Address
        </a>
      </div>
      
      <p>If the button doesn't work, you can copy and paste this link into your browser:</p>
      <p style="word-break: break-all; color: #666;">${s}</p>
      
      <p>This link will expire in 24 hours for security reasons.</p>
      
      <p>If you didn't create an account with us, please ignore this email.</p>
      
      <p>Best regards,<br>The Together We Can Team</p>
    </div>
  `})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,5452,8721],()=>t(24669));module.exports=s})();