(()=>{var e={};e.id=2588,e.ids=[2588],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},43719:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>g,routeModule:()=>d,serverHooks:()=>w,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>f});var s={};r.r(s),r.d(s,{GET:()=>c});var i=r(42706),n=r(28203),a=r(45994),o=r(96330),u=r(39187);let p=new o.PrismaClient;async function c(e){try{let{searchParams:t}=new URL(e.url),r=t.get("token");if(!r)return new u.NextResponse(JSON.stringify({status:"error",message:"Verification token is required"}),{status:400,headers:{"Content-Type":"application/json"}});let s=await p.verificationToken.findUnique({where:{token:r},include:{user:!0}});if(!s)return new u.NextResponse(JSON.stringify({status:"error",message:"Invalid verification token"}),{status:400,headers:{"Content-Type":"application/json"}});if(s.expires<new Date)return await p.verificationToken.delete({where:{id:s.id}}),new u.NextResponse(JSON.stringify({status:"error",message:"Verification token has expired. Please register again."}),{status:400,headers:{"Content-Type":"application/json"}});return await p.user.update({where:{id:s.userId},data:{emailVerified:new Date}}),await p.verificationToken.delete({where:{id:s.id}}),new u.NextResponse(JSON.stringify({status:"success",message:"Email verified successfully! You can now sign in to your account."}),{status:200,headers:{"Content-Type":"application/json"}})}catch(e){return console.error("Email verification error:",e),new u.NextResponse(JSON.stringify({status:"error",message:"Email verification failed",details:e instanceof Error?e.message:"Unknown error occurred"}),{status:500,headers:{"Content-Type":"application/json"}})}finally{await p.$disconnect()}}let d=new i.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/auth/verify/route",pathname:"/api/auth/verify",filename:"route",bundlePath:"app/api/auth/verify/route"},resolvedPagePath:"E:\\Deepshika\\web development\\Together-We-Can-main\\src\\app\\api\\auth\\verify\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:f,serverHooks:w}=d;function g(){return(0,a.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:f})}},96487:()=>{},78335:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,5452],()=>r(43719));module.exports=s})();